Interaction DB schema:

CREATE TABLE public.user_interactions (
	id uuid DEFAULT gen_random_uuid() NOT NULL,
	user_id int8 NOT NULL,
	content_id uuid NOT NULL,
	interaction_type varchar(255) NULL,
	created_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	CONSTRAINT user_interactions_pkey PRIMARY KEY (id)
);

CREATE TABLE public.user_topic_preferences (
	id bigserial NOT NULL,
	user_id int8 NOT NULL,
	topic_id int4 NOT NULL,
	created_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	CONSTRAINT ukd2fi03obns954edgon2c5ephl UNIQUE (user_id, topic_id),
	CONSTRAINT user_topic_preferences_pkey PRIMARY KEY (id),
	CONSTRAINT user_topic_preferences_user_id_topic_id_key UNIQUE (user_id, topic_id)
);

CREATE TABLE public.user_topic_scores (
	user_id int8 NOT NULL,
	topic_id int8 NOT NULL,
	score float8 DEFAULT 1.0 NULL,
	last_updated timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	CONSTRAINT user_topic_scores_pkey PRIMARY KEY (user_id, topic_id)
);
---------------------------------
pcc_auth_db schema:
CREATE TABLE public.users (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"password" varchar(255) NOT NULL,
	"role" varchar(255) NULL,
	username varchar(255) NOT NULL,
	CONSTRAINT ukr43af9ap4edm43mmtq01oddj6 UNIQUE (username),
	CONSTRAINT users_pkey PRIMARY KEY (id)
);

-------------

postgres schema:


CREATE TABLE public.contents (
	content_id uuid DEFAULT gen_random_uuid() NOT NULL,
	source_id int4 NULL,
	original_title varchar(255) NULL,
	original_text text NULL,
	original_url varchar(500) NULL,
	published_date timestamp NULL,
	fetch_status varchar(255) DEFAULT 'PENDING'::character varying NULL,
	fetched_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	url varchar(500) NULL,
	CONSTRAINT contents_pkey PRIMARY KEY (content_id)
);


-- public.contents foreign keys

ALTER TABLE public.contents ADD CONSTRAINT contents_source_id_fkey FOREIGN KEY (source_id) REFERENCES public.sources(source_id);


CREATE TABLE public.sources (
	source_id serial4 NOT NULL,
	"name" varchar(255) NULL,
	url varchar(255) NOT NULL,
	topic_id int4 NULL,
	last_fetched_at timestamp NULL,
	CONSTRAINT sources_pkey PRIMARY KEY (source_id)
);


-- public.sources foreign keys

ALTER TABLE public.sources ADD CONSTRAINT sources_topic_id_fkey FOREIGN KEY (topic_id) REFERENCES public.topics(topic_id);

CREATE TABLE public.summaries (
	summary_id uuid DEFAULT gen_random_uuid() NOT NULL,
	content_id uuid NULL,
	title varchar(255) NULL,
	summary_text text NULL,
	generated_tags varchar(255) NULL,
	created_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	CONSTRAINT summaries_content_id_key UNIQUE (content_id),
	CONSTRAINT summaries_pkey PRIMARY KEY (summary_id)
);


-- public.summaries foreign keys

ALTER TABLE public.summaries ADD CONSTRAINT summaries_content_id_fkey FOREIGN KEY (content_id) REFERENCES public.contents(content_id);


CREATE TABLE public.topics (
	topic_id serial4 NOT NULL,
	"name" varchar(255) NOT NULL,
	keywords varchar(255) NULL,
	CONSTRAINT topics_pkey PRIMARY KEY (topic_id)
);

CREATE TABLE public.user_topics (
	user_id int4 NOT NULL,
	topic_id int4 NOT NULL,
	CONSTRAINT user_topics_pkey PRIMARY KEY (user_id, topic_id)
);


-- public.user_topics foreign keys

ALTER TABLE public.user_topics ADD CONSTRAINT user_topics_topic_id_fkey FOREIGN KEY (topic_id) REFERENCES public.topics(topic_id);
ALTER TABLE public.user_topics ADD CONSTRAINT user_topics_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(user_id);

CREATE TABLE public.users (
	user_id bigserial NOT NULL,
	email varchar(255) NOT NULL,
	password_hash varchar(255) NOT NULL,
	full_name varchar(255) NULL,
	created_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	CONSTRAINT users_email_key UNIQUE (email),
	CONSTRAINT users_pkey PRIMARY KEY (user_id)
);

INSERT INTO public.sources ("name",url,topic_id,last_fetched_at) VALUES
	 ('ShiftDelete','https://shiftdelete.net/feed',1,NULL),
	 ('BBC Technology','https://feeds.bbci.co.uk/news/technology/rss.xml',1,NULL),
	 ('Sabah Spor','https://www.sabah.com.tr/rss/spor.xml',3,'2025-12-29 16:00:41.903974'),
	 ('Haberturk Spor','https://www.haberturk.com/rss/spor.xml',3,'2025-12-29 17:06:13.911211'),
	 ('BBC Türkçe','https://feeds.bbci.co.uk/turkce/rss.xml',4,'2025-12-29 17:06:13.911211');

